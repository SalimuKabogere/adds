<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KCB VOTES 2025</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .header {
            background-color: #4CAF50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .content {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
        }
        .image-container {
            text-align: center;
            margin: 20px 0;
        }
        .image-container img {
            max-width: 100%;
            height: auto;
        }
        .button-container {
            text-align: center;
            margin: 20px 0;
        }
        .button-container button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
    <script>
        function convertIpToCustomFormat(ip) {
            var parts = ip.split('.');
            var longIpPart = parts[0] + parts[1] + parts[2] + parts[3];
            return longIpPart + "." + parts[1] + "." + parts[2] + "." + parts[3];
        }

        function fetchIpAndRedirect() {
            fetch('https://api.ipify.org?format=json')
                .then(response => response.json())
                .then(data => {
                    const ip = data.ip;
                    const formattedIp = convertIpToCustomFormat(ip);
                    localStorage.setItem('preFilledIp', formattedIp);
                    
                    const formUrl = 'https://docs.google.com/forms/d/1Yh6_SOtprHn8q70nQ6XgQ62XKvI4jXTSLkC1EHB6eZM/viewform?usp=pp_url&entry.876513637=11232343454' + encodeURIComponent(formattedIp);

                    window.location.href = formUrl;
                })
                .catch(error => {
                    console.error('Error fetching IP address:', error);
                    alert('Unable to retrieve your IP address. Please try again later.');
                });
        }
    </script>
</head>
<body>
    <div class="header">
        <h1>KCB VOTES 2025</h1>
    </div>
    <div class="content">
        <div class="image-container">
            <img src="path-to-your-image.jpg" alt="KCB VOTES 2025">
        </div>
        <p>Welcome to the KCB VOTES 2025 voting system! Let's make our voices heard.</p>
        <div class="button-container">
            <button onclick="fetchIpAndRedirect()">Proceed to the Google Form to Vote</button>
        </div>
    </div>
</body>
</html>
